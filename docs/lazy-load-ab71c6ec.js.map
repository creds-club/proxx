{"version":3,"file":"lazy-load-ab71c6ec.js","sources":["../node_modules/comlink/src/comlink.ts","../src/main/offline/index.ts","../src/main/rendering/renderer.ts","../src/main/rendering/vertex.glsl","../src/main/rendering/fragment.glsl","../src/main/services/state/motion-preference.ts"],"sourcesContent":["/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\nexport var proxyMarker = Symbol(\"Comlink.proxy\");\nvar throwSet = new WeakSet();\nexport var transferHandlers = new Map([\n    [\n        \"proxy\",\n        {\n            canHandle: function (obj) { return obj && obj[proxyMarker]; },\n            serialize: function (obj) {\n                var _a = new MessageChannel(), port1 = _a.port1, port2 = _a.port2;\n                expose(obj, port1);\n                return [port2, [port2]];\n            },\n            deserialize: function (port) {\n                port.start();\n                return wrap(port);\n            }\n        }\n    ],\n    [\n        \"throw\",\n        {\n            canHandle: function (obj) { return throwSet.has(obj); },\n            serialize: function (obj) {\n                var isError = obj instanceof Error;\n                var serialized = obj;\n                if (isError) {\n                    serialized = {\n                        isError: isError,\n                        message: obj.message,\n                        stack: obj.stack\n                    };\n                }\n                return [serialized, []];\n            },\n            deserialize: function (obj) {\n                if (obj.isError) {\n                    throw Object.assign(new Error(), obj);\n                }\n                throw obj;\n            }\n        }\n    ]\n]);\nexport function expose(obj, ep) {\n    var _this = this;\n    if (ep === void 0) { ep = self; }\n    ep.addEventListener(\"message\", (function (ev) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var _a, path, id, type, argumentList, returnValue, parent_1, rawValue, _b, value, e_1, _c, wireValue, transferables;\n        return tslib_1.__generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    if (!ev || !ev.data) {\n                        return [2 /*return*/];\n                    }\n                    _a = ev.data, path = _a.path, id = _a.id, type = _a.type;\n                    argumentList = (ev.data.argumentList || []).map(fromWireValue);\n                    _d.label = 1;\n                case 1:\n                    _d.trys.push([1, 11, , 12]);\n                    parent_1 = path.slice(0, -1).reduce(function (obj, prop) { return obj[prop]; }, obj);\n                    rawValue = path.reduce(function (obj, prop) { return obj[prop]; }, obj);\n                    _b = type;\n                    switch (_b) {\n                        case 0 /* GET */: return [3 /*break*/, 2];\n                        case 1 /* SET */: return [3 /*break*/, 4];\n                        case 2 /* APPLY */: return [3 /*break*/, 5];\n                        case 3 /* CONSTRUCT */: return [3 /*break*/, 7];\n                    }\n                    return [3 /*break*/, 9];\n                case 2: return [4 /*yield*/, rawValue];\n                case 3:\n                    returnValue = _d.sent();\n                    return [3 /*break*/, 10];\n                case 4:\n                    {\n                        parent_1[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n                        returnValue = true;\n                    }\n                    return [3 /*break*/, 10];\n                case 5: return [4 /*yield*/, rawValue.apply(parent_1, argumentList)];\n                case 6:\n                    returnValue = _d.sent();\n                    return [3 /*break*/, 10];\n                case 7: return [4 /*yield*/, new (rawValue.bind.apply(rawValue, tslib_1.__spread([void 0], argumentList)))()];\n                case 8:\n                    value = _d.sent();\n                    returnValue = proxy(value);\n                    return [3 /*break*/, 10];\n                case 9:\n                    console.warn(\"Unrecognized message\", ev.data);\n                    _d.label = 10;\n                case 10: return [3 /*break*/, 12];\n                case 11:\n                    e_1 = _d.sent();\n                    returnValue = e_1;\n                    throwSet.add(e_1);\n                    return [3 /*break*/, 12];\n                case 12:\n                    _c = tslib_1.__read(toWireValue(returnValue), 2), wireValue = _c[0], transferables = _c[1];\n                    ep.postMessage(tslib_1.__assign({}, wireValue, { id: id }), transferables);\n                    return [2 /*return*/];\n            }\n        });\n    }); }));\n    if (ep.start) {\n        ep.start();\n    }\n}\nexport function wrap(ep) {\n    return createProxy(ep);\n}\nfunction createProxy(ep, path) {\n    if (path === void 0) { path = []; }\n    var proxy = new Proxy(new Function(), {\n        get: function (_target, prop) {\n            if (prop === \"then\") {\n                if (path.length === 0) {\n                    return { then: function () { return proxy; } };\n                }\n                var r = requestResponseMessage(ep, {\n                    type: 0 /* GET */,\n                    path: path\n                }).then(fromWireValue);\n                return r.then.bind(r);\n            }\n            return createProxy(ep, tslib_1.__spread(path, [prop.toString()]));\n        },\n        set: function (_target, prop, rawValue) {\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n            // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n            var _a = tslib_1.__read(toWireValue(rawValue), 2), value = _a[0], transferables = _a[1];\n            return requestResponseMessage(ep, {\n                type: 1 /* SET */,\n                path: tslib_1.__spread(path, [prop.toString()]),\n                value: value\n            }, transferables).then(fromWireValue);\n        },\n        apply: function (_target, _thisArg, rawArgumentList) {\n            // We just pretend that `bind()` didn’t happen.\n            if (path[path.length - 1] === \"bind\") {\n                return createProxy(ep, path.slice(0, -1));\n            }\n            var _a = tslib_1.__read(processArguments(rawArgumentList), 2), argumentList = _a[0], transferables = _a[1];\n            return requestResponseMessage(ep, {\n                type: 2 /* APPLY */,\n                path: path,\n                argumentList: argumentList\n            }, transferables).then(fromWireValue);\n        },\n        construct: function (_target, rawArgumentList) {\n            var _a = tslib_1.__read(processArguments(rawArgumentList), 2), argumentList = _a[0], transferables = _a[1];\n            return requestResponseMessage(ep, {\n                type: 3 /* CONSTRUCT */,\n                path: path,\n                argumentList: argumentList\n            }, transferables).then(fromWireValue);\n        }\n    });\n    return proxy;\n}\nfunction myFlat(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n    var processed = argumentList.map(toWireValue);\n    return [processed.map(function (v) { return v[0]; }), myFlat(processed.map(function (v) { return v[1]; }))];\n}\nvar transferCache = new WeakMap();\nexport function transfer(obj, transfers) {\n    transferCache.set(obj, transfers);\n    return obj;\n}\nexport function proxy(obj) {\n    var _a;\n    return Object.assign(obj, (_a = {}, _a[proxyMarker] = true, _a));\n}\nexport function windowEndpoint(w, context) {\n    if (context === void 0) { context = self; }\n    return {\n        postMessage: function (msg, transferables) {\n            return w.postMessage(msg, \"*\", transferables);\n        },\n        addEventListener: context.addEventListener.bind(context),\n        removeEventListener: context.removeEventListener.bind(context)\n    };\n}\nfunction toWireValue(value) {\n    var e_2, _a;\n    try {\n        for (var transferHandlers_1 = tslib_1.__values(transferHandlers), transferHandlers_1_1 = transferHandlers_1.next(); !transferHandlers_1_1.done; transferHandlers_1_1 = transferHandlers_1.next()) {\n            var _b = tslib_1.__read(transferHandlers_1_1.value, 2), name_1 = _b[0], handler = _b[1];\n            if (handler.canHandle(value)) {\n                var _c = tslib_1.__read(handler.serialize(value), 2), serializedValue = _c[0], transferables = _c[1];\n                return [\n                    {\n                        type: 3 /* HANDLER */,\n                        name: name_1,\n                        value: serializedValue\n                    },\n                    transferables\n                ];\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (transferHandlers_1_1 && !transferHandlers_1_1.done && (_a = transferHandlers_1.return)) _a.call(transferHandlers_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return [\n        {\n            type: 0 /* RAW */,\n            value: value\n        },\n        transferCache.get(value) || []\n    ];\n}\nfunction fromWireValue(value) {\n    switch (value.type) {\n        case 3 /* HANDLER */:\n            return transferHandlers.get(value.name).deserialize(value.value);\n        case 0 /* RAW */:\n            return value.value;\n    }\n}\nfunction requestResponseMessage(ep, msg, transfers) {\n    return new Promise(function (resolve) {\n        var id = generateUUID();\n        ep.addEventListener(\"message\", function l(ev) {\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\n                return;\n            }\n            ep.removeEventListener(\"message\", l);\n            resolve(ev.data);\n        });\n        if (ep.start) {\n            ep.start();\n        }\n        ep.postMessage(tslib_1.__assign({ id: id }, msg), transfers);\n    });\n}\nfunction generateUUID() {\n    return new Array(4)\n        .fill(0)\n        .map(function () { return Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16); })\n        .join(\"-\");\n}\n//# sourceMappingURL=comlink.js.map","import * as tslib_1 from \"tslib\";\nimport { noCache } from \"../utils/constants\";\n/** Tell the service worker to skip waiting. Resolves once the controller has changed. */\nexport function skipWaiting() {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var reg;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, navigator.serviceWorker.getRegistration()];\n                case 1:\n                    reg = _a.sent();\n                    if (!reg || !reg.waiting) {\n                        return [2 /*return*/];\n                    }\n                    reg.waiting.postMessage(\"skip-waiting\");\n                    return [2 /*return*/, new Promise(function (resolve) {\n                            navigator.serviceWorker.addEventListener(\"controllerchange\", function () { return resolve(); }, { once: true });\n                        })];\n            }\n        });\n    });\n}\n/** Is there currently a waiting worker? */\nexport var updateReady = false;\n/** Wait for an installing worker */\nfunction installingWorker(reg) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            if (reg.installing) {\n                return [2 /*return*/, reg.installing];\n            }\n            return [2 /*return*/, new Promise(function (resolve) {\n                    reg.addEventListener(\"updatefound\", function () { return resolve(reg.installing); }, {\n                        once: true\n                    });\n                })];\n        });\n    });\n}\nfunction watchForUpdate() {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var hasController, reg, installing;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    hasController = !!navigator.serviceWorker.controller;\n                    // If we don't have a controller, we don't need to check for updates – we've just loaded from the\n                    // network.\n                    if (!hasController) {\n                        return [2 /*return*/];\n                    }\n                    return [4 /*yield*/, navigator.serviceWorker.getRegistration()];\n                case 1:\n                    reg = _a.sent();\n                    // Service worker not registered yet.\n                    if (!reg) {\n                        return [2 /*return*/];\n                    }\n                    // Look for updates\n                    if (reg.waiting) {\n                        updateReady = true;\n                        return [2 /*return*/];\n                    }\n                    return [4 /*yield*/, installingWorker(reg)];\n                case 2:\n                    installing = _a.sent();\n                    return [4 /*yield*/, new Promise(function (resolve) {\n                            installing.addEventListener(\"statechange\", function () {\n                                if (installing.state === \"installed\") {\n                                    resolve();\n                                }\n                            });\n                        })];\n                case 3:\n                    _a.sent();\n                    updateReady = true;\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n/** Set up the service worker and monitor changes */\nexport function init() {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var reg;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!noCache) return [3 /*break*/, 4];\n                    return [4 /*yield*/, navigator.serviceWorker.getRegistration()];\n                case 1:\n                    reg = _a.sent();\n                    if (!reg) return [3 /*break*/, 3];\n                    return [4 /*yield*/, reg.unregister()];\n                case 2:\n                    _a.sent();\n                    location.reload();\n                    _a.label = 3;\n                case 3: return [2 /*return*/];\n                case 4: return [4 /*yield*/, navigator.serviceWorker.register(\"/sw.js\")];\n                case 5:\n                    _a.sent();\n                    watchForUpdate();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n//# sourceMappingURL=index.js.map","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport ShaderBox from \"src/main/utils/shaderbox\";\nimport fragmentShader from \"./fragment.glsl\";\nimport vertexShader from \"./vertex.glsl\";\nexport var supportsSufficientWebGL = (function () {\n    try {\n        // tslint:disable-next-line:no-unused-expression\n        new ShaderBox(vertexShader, fragmentShader);\n    }\n    catch (e) {\n        console.warn(\"Cannot use WebGL:\", e);\n        return false;\n    }\n    return true;\n})();\n//# sourceMappingURL=renderer.js.map","export default \"\\n#version 100\\nprecision highp float;void main(){gl_Position=vec4(1.);}\";","export default \"\\n#version 100\\nprecision highp float;void main(){gl_FragColor=vec4(1.);}\";","import * as tslib_1 from \"tslib\";\nimport { get, set } from \"idb-keyval\";\nimport { supportsSufficientWebGL } from \"src/main/rendering/renderer\";\nimport { forceMotionMode } from \"../../utils/constants\";\nimport { isFeaturePhone } from \"../../utils/static-display\";\nvar DEFAULT = !matchMedia(\"(prefers-reduced-motion: reduce)\")\n    .matches;\n/**\n * Set motion preference (true means animation is ON)\n *\n * @param motion\n */\nexport function setMotionPreference(motion) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, set(\"motion\", motion)];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexport function getMotionPreference() {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var motion;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, get(\"motion\")];\n                case 1:\n                    motion = _a.sent();\n                    if (typeof motion === \"boolean\") {\n                        return [2 /*return*/, motion];\n                    }\n                    // if no value is assigned to \"motion\", return default value\n                    return [2 /*return*/, DEFAULT];\n            }\n        });\n    });\n}\nexport function shouldUseMotion() {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            // Whenever `motion` query flag is set, it is honoured regardless of device or user preference\n            if (forceMotionMode !== undefined) {\n                return [2 /*return*/, forceMotionMode];\n            }\n            if (!supportsSufficientWebGL || isFeaturePhone) {\n                return [2 /*return*/, false];\n            }\n            return [2 /*return*/, getMotionPreference()];\n        });\n    });\n}\n//# sourceMappingURL=motion-preference.js.map"],"names":["proxyMarker","Symbol","throwSet","WeakSet","transferHandlers","Map","canHandle","obj","serialize","_a","MessageChannel","port1","port2","ep","_this","this","self","addEventListener","ev","tslib_1.__awaiter","path","id","type","argumentList","returnValue","parent_1","rawValue","value","e_1","_c","wireValue","transferables","tslib_1.__generator","_d","label","data","map","fromWireValue","trys","push","slice","reduce","prop","sent","apply","bind","tslib_1.__spread","proxy","console","warn","add","tslib_1.__read","toWireValue","postMessage","tslib_1.__assign","start","expose","deserialize","port","wrap","has","isError","Error","serialized","message","stack","Object","assign","createProxy","Proxy","Function","get","_target","length","then","r","requestResponseMessage","toString","set","_thisArg","rawArgumentList","processArguments","construct","arr","processed","v","Array","prototype","concat","transferCache","WeakMap","e_2","transferHandlers_1","tslib_1.__values","transferHandlers_1_1","next","done","_b","name_1","handler","name","e_2_1","error","return","call","msg","transfers","Promise","resolve","fill","Math","floor","random","Number","MAX_SAFE_INTEGER","join","l","removeEventListener","installingWorker","reg","installing","once","supportsSufficientWebGL","ShaderBox","e","DEFAULT","matchMedia","matches","getMotionPreference","motion","noCache","navigator","serviceWorker","getRegistration","unregister","location","reload","register","controller","waiting","updateReady","state","watchForUpdate","undefined","forceMotionMode","isFeaturePhone"],"mappings":"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"}