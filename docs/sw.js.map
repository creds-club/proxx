{"version":3,"file":"sw.js","sources":["../src/sw/index.ts"],"sourcesContent":["import * as tslib_1 from \"tslib\";\nimport version from \"consts:version\";\nimport resourceList from \"resource-list:\";\nvar staticCache = \"static-\" + version;\nvar expectedCaches = [staticCache];\nself.addEventListener(\"install\", function (event) {\n    var resourcesToCache = resourceList.filter(function (item) {\n        return item !== \"sw.js\" &&\n            item !== \"bootstrap.js\" &&\n            item !== \"_headers\" &&\n            !item.includes(\"manifest-\") &&\n            !item.includes(\"icon-\") &&\n            !item.includes(\"assetlinks-\") &&\n            !item.includes(\"social-\");\n    });\n    var toCache = tslib_1.__spread([\"/\"], resourcesToCache);\n    event.waitUntil((function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var cache;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, caches.open(staticCache)];\n                    case 1:\n                        cache = _a.sent();\n                        return [4 /*yield*/, cache.addAll(toCache)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    })());\n});\nself.addEventListener(\"activate\", function (event) {\n    self.clients.claim();\n    event.waitUntil((function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var promises;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, caches.keys()];\n                    case 1:\n                        promises = (_a.sent()).map(function (cacheName) {\n                            if (!expectedCaches.includes(cacheName)) {\n                                return caches.delete(cacheName);\n                            }\n                        });\n                        return [4 /*yield*/, Promise.all(promises)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    })());\n});\nself.addEventListener(\"fetch\", function (event) {\n    if (event.request.method !== \"GET\") {\n        return;\n    }\n    event.respondWith((function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var cachedResponse;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, caches.match(event.request, {\n                            ignoreSearch: true\n                        })];\n                    case 1:\n                        cachedResponse = _a.sent();\n                        return [2 /*return*/, cachedResponse || fetch(event.request)];\n                }\n            });\n        });\n    })());\n});\nself.addEventListener(\"message\", function (event) {\n    switch (event.data) {\n        case \"skip-waiting\":\n            self.skipWaiting();\n            break;\n    }\n});\n//# sourceMappingURL=index.js.map"],"names":["staticCache","version","expectedCaches","self","addEventListener","event","resourcesToCache","resourceList","filter","item","includes","toCache","tslib_1.__spread","waitUntil","tslib_1.__awaiter","this","tslib_1.__generator","_a","label","caches","open","sent","addAll","clients","claim","promises","keys","map","cacheName","delete","Promise","all","request","method","respondWith","match","ignoreSearch","fetch","data","skipWaiting"],"mappings":"0tBAGA,IAAIA,EAAc,UAAYC,UAC1BC,EAAiB,CAACF,GACtBG,KAAKC,iBAAiB,UAAW,SAAUC,GACvC,IAAIC,EAAmBC,yCAAaC,OAAO,SAAUC,GACjD,QAAgB,UAATA,GACM,iBAATA,GACS,aAATA,GACCA,EAAKC,SAAS,cACdD,EAAKC,SAAS,UACdD,EAAKC,SAAS,gBACdD,EAAKC,SAAS,cAEnBC,EAAUC,WAAiB,CAAC,KAAMN,GACtCD,EAAMQ,UAAU,WACZ,OAAOC,YAAkBC,UAAM,OAAQ,EAAQ,WAE3C,OAAOC,cAAoBD,KAAM,SAAUE,GACvC,OAAQA,EAAGC,OACP,KAAK,EAAG,MAAO,CAAC,EAAaC,OAAOC,KAAKpB,IACzC,KAAK,EAED,MAAO,CAAC,EADAiB,EAAGI,OACgBC,OAAOX,IACtC,KAAK,EAED,OADAM,EAAGI,OACI,CAAC,QAXZ,MAiBpBlB,KAAKC,iBAAiB,WAAY,SAAUC,GACxCF,KAAKoB,QAAQC,QACbnB,EAAMQ,UAAU,WACZ,OAAOC,YAAkBC,UAAM,OAAQ,EAAQ,WAC3C,IAAIU,EACJ,OAAOT,cAAoBD,KAAM,SAAUE,GACvC,OAAQA,EAAGC,OACP,KAAK,EAAG,MAAO,CAAC,EAAaC,OAAOO,QACpC,KAAK,EAMD,OALAD,EAAYR,EAAGI,OAAQM,IAAI,SAAUC,GACjC,IAAK1B,EAAeQ,SAASkB,GACzB,OAAOT,OAAOU,OAAOD,KAGtB,CAAC,EAAaE,QAAQC,IAAIN,IACrC,KAAK,EAED,OADAR,EAAGI,OACI,CAAC,QAfZ,MAqBpBlB,KAAKC,iBAAiB,QAAS,SAAUC,GACR,QAAzBA,EAAM2B,QAAQC,QAGlB5B,EAAM6B,YAAY,WACd,OAAOpB,YAAkBC,UAAM,OAAQ,EAAQ,WAE3C,OAAOC,cAAoBD,KAAM,SAAUE,GACvC,OAAQA,EAAGC,OACP,KAAK,EAAG,MAAO,CAAC,EAAaC,OAAOgB,MAAM9B,EAAM2B,QAAS,CACjDI,cAAc,KAEtB,KAAK,EAED,MAAO,CAAC,EADSnB,EAAGI,QACoBgB,MAAMhC,EAAM2B,eAVtD,MAgBtB7B,KAAKC,iBAAiB,UAAW,SAAUC,GACvC,OAAQA,EAAMiC,MACV,IAAK,eACDnC,KAAKoC"}