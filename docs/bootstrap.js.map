{"version":3,"file":"bootstrap.js","sources":["../consts:nebulaSafeDark","../src/main/services/state/grid-default.ts","../src/main/services/state/local-state-subscribe.ts","../src/main/services/preact-canvas/components/icons/initial.tsx","../src/main/services/preact-canvas/components/bottom-bar/index.tsx","../src/main/services/preact-canvas/components/deferred/index.tsx","../src/main/services/preact-canvas/components/game-loading/index.tsx","../src/main/services/preact-canvas/components/intro/index.tsx","../src/main/services/preact-canvas/index.tsx","../src/main/bootstrap.tsx"],"sourcesContent":["export default [14,16,62]","import * as tslib_1 from \"tslib\";\n/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport prerender from \"consts:prerender\";\nimport { get, set } from \"idb-keyval\";\nimport { presets } from \"./grid-presets\";\n// WARNING: This module is part of the main bundle. Avoid adding to it if possible.\nvar key = \"default-game\";\nexport function setGridDefault(width, height, mines) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, set(key, { width: width, height: height, mines: mines })];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nexport function getGridDefault() {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var gridDefault;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    // The prerenderer doesn't have IndexedDB\n                    if (prerender) {\n                        return [2 /*return*/, presets.easy];\n                    }\n                    return [4 /*yield*/, get(key)];\n                case 1:\n                    gridDefault = _a.sent();\n                    if (!gridDefault) {\n                        return [2 /*return*/, presets.easy];\n                    }\n                    return [2 /*return*/, gridDefault];\n            }\n        });\n    });\n}\n//# sourceMappingURL=grid-default.js.map","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\n// WARNING: This module is part of the main bundle. Avoid adding to it if possible.\nexport default function localStateSubscribe(stateService, callback) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var comlinkProxy;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, import(\"../preact-canvas/lazy-load\")];\n                case 1:\n                    comlinkProxy = (_a.sent()).comlinkProxy;\n                    stateService.subscribe(comlinkProxy(callback));\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n//# sourceMappingURL=local-state-subscribe.js.map","import * as tslib_1 from \"tslib\";\n/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { h } from \"preact\";\n// WARNING: This module is part of the main bundle. Avoid adding to it if possible.\n// tslint:disable:max-line-length variable-name\nexport var Fullscreen = function (props) { return (h(\"svg\", tslib_1.__assign({ viewBox: \"0 0 24 24\" }, props),\n    h(\"path\", { d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\" }))); };\nexport var Information = function (props) { return (h(\"svg\", tslib_1.__assign({ viewBox: \"0 0 24 24\" }, props),\n    h(\"path\", { d: \"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" }))); };\nexport var Arrow = function (props) { return (h(\"svg\", tslib_1.__assign({ viewBox: \"0 0 10 5\", preserveAspectRatio: \"none\" }, props),\n    h(\"path\", { d: \"M0 0l5 5 5-5z\" }))); };\nexport var Back = function (props) { return (h(\"svg\", tslib_1.__assign({ viewBox: \"0 0 24 24\" }, props),\n    h(\"path\", { d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" }))); };\n//# sourceMappingURL=initial.js.map","import * as tslib_1 from \"tslib\";\n/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Component, h } from \"preact\";\nimport { isFeaturePhone } from \"src/main/utils/static-display\";\nimport { bind } from \"src/utils/bind\";\nimport { Back, Fullscreen, Information } from \"../icons/initial\";\nimport { bottomBar, checkbox, fpToggle, fullscreen, hidden, leftIcon, leftKeyIcon, leftToggleLabel, noFullscreen, rightToggleLabel, shortcutKey, toggle, toggleContainer, toggleLabel } from \"./style.css\";\n// WARNING: This module is part of the main bundle. Avoid adding to it if possible.\nfunction goFullscreen() {\n    if (document.documentElement.requestFullscreen) {\n        document.documentElement.requestFullscreen();\n    }\n    else if (document.documentElement.webkitRequestFullscreen) {\n        document.documentElement.webkitRequestFullscreen();\n    }\n}\nvar fullscreenSupported = !!(document.documentElement.requestFullscreen ||\n    document.documentElement.webkitRequestFullscreen);\nvar BottomBar = /** @class */ (function (_super) {\n    tslib_1.__extends(BottomBar, _super);\n    function BottomBar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            flagModeAnnouncement: \"\"\n        };\n        return _this;\n    }\n    BottomBar.prototype.render = function (_a, _b) {\n        var _this = this;\n        var onSettingsClick = _a.onSettingsClick, onBackClick = _a.onBackClick, buttonType = _a.buttonType, display = _a.display, showDangerModeToggle = _a.showDangerModeToggle, dangerMode = _a.dangerMode;\n        var flagModeAnnouncement = _b.flagModeAnnouncement;\n        var backBtn = isFeaturePhone ? (h(\"button\", { class: leftKeyIcon, onClick: onBackClick, \"aria-label\": \"Back to main menu\" },\n            h(\"span\", { class: shortcutKey }, \"*\"),\n            \" back\")) : (h(\"button\", { class: leftIcon, onClick: onBackClick, \"aria-label\": \"Back to main menu\" },\n            h(Back, null)));\n        var infoBtn = isFeaturePhone ? (h(\"button\", { class: leftKeyIcon, onClick: onSettingsClick, \"aria-label\": \"Open information and settings\" },\n            h(\"span\", { class: shortcutKey }, \"*\"),\n            \" info\")) : (h(\"button\", { class: leftIcon, onClick: onSettingsClick, \"aria-label\": \"Open information and settings\" },\n            h(Information, null)));\n        var toggleBtn = isFeaturePhone ? (h(\"div\", { class: fpToggle },\n            h(\"span\", { class: shortcutKey }, \"#\"),\n            \" \",\n            h(\"label\", null,\n                h(\"input\", { class: checkbox, type: \"checkbox\", role: \"switch checkbox\", onChange: this._onDangerModeSwitchToggle, checked: !dangerMode, \"aria-label\": \"flag mode\", ref: function (el) { return (_this._flagCheckbox = el); } }),\n                h(\"span\", { \"aria-hidden\": \"true\" },\n                    \"Flag:\",\n                    dangerMode ? \"OFF\" : \"ON\")),\n            h(\"span\", { role: \"status\", \"aria-live\": \"assertive\", \"aria-label\": flagModeAnnouncement }))) : (h(\"div\", { class: toggleContainer, onTouchStart: this._onDangerModeTouchStart },\n            h(\"label\", { class: toggleLabel },\n                h(\"span\", { \"aria-hidden\": \"true\", class: leftToggleLabel }, \"Clear\"),\n                h(\"input\", { class: checkbox, type: \"checkbox\", role: \"switch checkbox\", onChange: this._onDangerModeSwitchToggle, checked: !dangerMode, \"aria-label\": \"flag mode\", ref: function (el) { return (_this._flagCheckbox = el); } }),\n                h(\"svg\", { viewBox: \"0 0 32 16\", class: toggle },\n                    h(\"defs\", null,\n                        h(\"mask\", { id: \"flag-toggle-mask\" },\n                            h(\"rect\", { fill: \"#fff\", x: \"0\", y: \"0\", width: \"32\", height: \"16\" }),\n                            h(\"circle\", { cx: dangerMode ? 8 : 24, cy: \"8\", fill: \"#000\", r: \"4\" }))),\n                    h(\"rect\", { fill: \"#fff\", x: \"0\", y: \"0\", width: \"32\", height: \"16\", rx: \"8\", ry: \"8\", mask: \"url(#flag-toggle-mask)\" })),\n                h(\"span\", { \"aria-hidden\": \"true\", class: rightToggleLabel }, \"Flag\")),\n            h(\"span\", { role: \"status\", \"aria-live\": \"assertive\", \"aria-label\": flagModeAnnouncement })));\n        var fullscreenBtn = isFeaturePhone ? (\"\") : fullscreenSupported ? (h(\"button\", { class: fullscreen, onClick: goFullscreen, \"aria-label\": \"fullscreen mode\" },\n            h(Fullscreen, null))) : (h(\"div\", { class: noFullscreen }));\n        return (h(\"div\", { class: [bottomBar, display ? \"\" : hidden].join(\" \"), role: \"menubar\" }));\n    };\n    BottomBar.prototype.componentDidMount = function () {\n        window.addEventListener(\"keyup\", this._onKeyUp);\n    };\n    BottomBar.prototype.componentWillUnmount = function () {\n        window.removeEventListener(\"keyup\", this._onKeyUp);\n    };\n    BottomBar.prototype._onKeyUp = function (event) {\n        if (event.key === \"*\") {\n            if (this.props.buttonType === \"back\") {\n                this.props.onBackClick();\n            }\n            else {\n                this.props.onSettingsClick();\n            }\n        }\n        else if (this.props.showDangerModeToggle &&\n            (event.key === \"f\" || event.key === \"#\")) {\n            this._dangerModeChange(!this.props.dangerMode, true);\n        }\n    };\n    BottomBar.prototype._dangerModeChange = function (newVal, announce) {\n        this.props.onDangerModeChange(newVal);\n        // We need to clear the announcement when the input is interacted with, so if we need to\n        // announce a change later, we aren't setting it to the same value it already has (which would\n        // mean no announcement).\n        var flagModeAnnouncement = \"\";\n        if (announce) {\n            flagModeAnnouncement = newVal ? \"flag mode off\" : \"flag mode on\";\n        }\n        this.setState({ flagModeAnnouncement: flagModeAnnouncement });\n    };\n    BottomBar.prototype._onDangerModeTouchStart = function (event) {\n        event.preventDefault();\n        this._dangerModeChange(this._flagCheckbox.checked, true);\n    };\n    BottomBar.prototype._onDangerModeSwitchToggle = function () {\n        this._dangerModeChange(!this._flagCheckbox.checked, false);\n    };\n    tslib_1.__decorate([\n        bind\n    ], BottomBar.prototype, \"_onKeyUp\", null);\n    tslib_1.__decorate([\n        bind\n    ], BottomBar.prototype, \"_onDangerModeTouchStart\", null);\n    tslib_1.__decorate([\n        bind\n    ], BottomBar.prototype, \"_onDangerModeSwitchToggle\", null);\n    return BottomBar;\n}(Component));\nexport default BottomBar;\n//# sourceMappingURL=index.js.map","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as tslib_1 from \"tslib\";\n// WARNING: This module is part of the main bundle. Avoid adding to it if possible.\nimport { Component } from \"preact\";\n/**\n * Create a lazy-loading component.\n *\n * @param componentPromise A promise for a component class.\n */\nexport default function deferred(componentPromise) {\n    return /** @class */ (function (_super) {\n        tslib_1.__extends(Deferred, _super);\n        function Deferred(props) {\n            var _this = _super.call(this, props) || this;\n            _this.state = {\n                LoadedComponent: undefined\n            };\n            componentPromise.then(function (component) {\n                _this.setState({ LoadedComponent: component });\n            });\n            return _this;\n        }\n        Deferred.prototype.render = function (_a, _b) {\n            var loaded = _a.loaded, loading = _a.loading;\n            var LoadedComponent = _b.LoadedComponent;\n            if (LoadedComponent) {\n                return loaded(LoadedComponent);\n            }\n            return loading();\n        };\n        return Deferred;\n    }(Component));\n}\n//# sourceMappingURL=index.js.map","import * as tslib_1 from \"tslib\";\n/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Component, h } from \"preact\";\nimport { loading, loadingInner } from \"./style.css\";\n// WARNING: This module is part of the main bundle. Avoid adding to it if possible.\nvar GameLoading = /** @class */ (function (_super) {\n    tslib_1.__extends(GameLoading, _super);\n    function GameLoading() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GameLoading.prototype.render = function () {\n        return (h(\"div\", { class: loading },\n            h(\"div\", { class: loadingInner }, \"\\u2026Loading\\u2026\")));\n    };\n    return GameLoading;\n}(Component));\nexport default GameLoading;\n//# sourceMappingURL=index.js.map","import * as tslib_1 from \"tslib\";\n/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport prerender from \"consts:prerender\";\nimport { Component, h } from \"preact\";\nimport { getPresetName, presets } from \"src/main/services/state/grid-presets\";\nimport { isFeaturePhone } from \"src/main/utils/static-display\";\nimport { bind } from \"src/utils/bind\";\nimport deferred from \"../deferred\";\nimport { Arrow } from \"../icons/initial\";\nimport { field as fieldStyle, intro as introStyle, label as labelStyle, labelText as labelTextStyle, numberDownArrow as numberDownArrowStyle, numberUpArrow as numberUpArrowStyle, selectArrow as selectArrowStyle, selectField as selectFieldStyle, settingsRow as settingsRowStyle, shortcutKey as shortcutKeyStyle, showbizIntro as showbizIntroStyle, showbizLoading as showbizLoadingStyle, startButton as startButtonStyle, startForm as startFormStyle } from \"./style.css\";\n// WARNING: This module is part of the main bundle. Avoid adding to it if possible.\n// tslint:disable-next-line: variable-name\nvar ShowbizTitleDeferred = deferred(new Promise(function (resolve) {\n    if (!prerender) {\n        resolve();\n    }\n}).then(function () { return import(\"../../lazy-components\").then(function (m) { return m.ShowbizTitle; }); }));\nvar NumberField = /** @class */ (function (_super) {\n    tslib_1.__extends(NumberField, _super);\n    function NumberField() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NumberField.prototype.render = function (props) {\n        var _this = this;\n        var children = props.children, inputRef = props.inputRef, inputProps = tslib_1.__rest(props, [\"children\", \"inputRef\"]);\n        return (h(\"label\", { class: labelStyle },\n            h(Arrow, { class: numberUpArrowStyle, onClick: this._onUpClick }),\n            h(Arrow, { class: numberDownArrowStyle, onClick: this._onDownClick }),\n            h(\"span\", { class: labelTextStyle }, props.children),\n            h(\"input\", tslib_1.__assign({ ref: function (el) {\n                    _this._input = el;\n                    if (inputRef) {\n                        inputRef(el);\n                    }\n                }, class: fieldStyle, type: \"number\", inputmode: \"numeric\", pattern: \"[0-9]*\" }, inputProps))));\n    };\n    NumberField.prototype._onUpClick = function () {\n        this._input.valueAsNumber = Math.min(this._input.valueAsNumber + 1, Number(this._input.max));\n        this._dispatch();\n    };\n    NumberField.prototype._onDownClick = function () {\n        this._input.valueAsNumber = Math.max(this._input.valueAsNumber - 1, Number(this._input.min));\n        this._dispatch();\n    };\n    NumberField.prototype._dispatch = function () {\n        this._input.dispatchEvent(new Event(\"change\"));\n    };\n    tslib_1.__decorate([\n        bind\n    ], NumberField.prototype, \"_onUpClick\", null);\n    tslib_1.__decorate([\n        bind\n    ], NumberField.prototype, \"_onDownClick\", null);\n    return NumberField;\n}(Component));\nfunction getStateUpdateFromDefaults(defaults) {\n    var width = defaults.width, height = defaults.height, mines = defaults.mines;\n    return {\n        width: width,\n        height: height,\n        mines: mines,\n        presetName: getPresetName(width, height, mines)\n    };\n}\n// tslint:disable-next-line:max-classes-per-file\nvar Intro = /** @class */ (function (_super) {\n    tslib_1.__extends(Intro, _super);\n    function Intro(props) {\n        var _this = _super.call(this, props) || this;\n        if (props.defaults) {\n            _this.state = getStateUpdateFromDefaults(props.defaults);\n        }\n        return _this;\n    }\n    Intro.prototype.componentDidMount = function () {\n        window.scrollTo(0, 0);\n        window.addEventListener(\"keyup\", this._onKeyUp);\n    };\n    Intro.prototype.componentWillUnmount = function () {\n        window.removeEventListener(\"keyup\", this._onKeyUp);\n    };\n    Intro.prototype.componentWillReceiveProps = function (_a) {\n        var defaults = _a.defaults;\n        if (defaults && !this.props.defaults) {\n            this.setState(getStateUpdateFromDefaults(defaults));\n        }\n    };\n    Intro.prototype.render = function (_a, _b) {\n        var _this = this;\n        var motion = _a.motion;\n        var width = _b.width, height = _b.height, mines = _b.mines, presetName = _b.presetName;\n        return (h(\"div\", { class: introStyle },\n            h(\"div\", { class: showbizIntroStyle },\n                h(ShowbizTitleDeferred, { loading: function () { return h(\"div\", { class: showbizLoadingStyle }); }, \n                    // tslint:disable-next-line: variable-name\n                    loaded: function (ShowbizTitle) { return h(ShowbizTitle, { motion: motion }); } })),\n            h(\"form\", { onSubmit: this._startGame, class: startFormStyle, \"aria-label\": \"game settings\" },\n                h(\"div\", { class: settingsRowStyle },\n                    h(\"label\", { class: labelStyle },\n                        h(\"span\", { class: labelTextStyle }, \"Difficulty\"),\n                        h(Arrow, { class: selectArrowStyle }),\n                        h(\"select\", { required: true, class: selectFieldStyle, ref: function (el) { return (_this._presetSelect = el); }, onChange: this._onSelectChange, value: presetName || \"\" }, presetName && [\n                            h(\"option\", { value: \"easy\" }, \"Easy\"),\n                            h(\"option\", { value: \"medium\" }, \"Medium\"),\n                            h(\"option\", { value: \"hard\" }, \"Hard\"),\n                            h(\"option\", { value: \"custom\" }, \"Custom\")\n                        ]))),\n                h(\"div\", { class: settingsRowStyle },\n                    h(NumberField, { required: true, min: \"5\", max: \"40\", step: \"1\", value: width || \"\", inputRef: function (el) { return (_this._widthInput = el); }, onChange: this._onSettingInput }, \"Width\"),\n                    h(NumberField, { required: true, min: \"5\", max: \"40\", step: \"1\", value: height || \"\", inputRef: function (el) { return (_this._heightInput = el); }, onChange: this._onSettingInput }, \"Height\")),\n                h(\"div\", { class: settingsRowStyle },\n                    h(NumberField, { required: true, min: \"1\", max: width && height ? width * height : \"\", step: \"1\", value: mines, inputRef: function (el) { return (_this._minesInput = el); }, onChange: this._onSettingInput }, \"Black holes\")),\n                h(\"div\", { class: settingsRowStyle },\n                    h(\"button\", { class: startButtonStyle },\n                        isFeaturePhone ? h(\"span\", { class: shortcutKeyStyle }, \"#\") : \"\",\n                        \" \",\n                        \"Start\")))));\n    };\n    Intro.prototype._onKeyUp = function (event) {\n        if (event.key === \"#\") {\n            this._startGame(event);\n        }\n    };\n    Intro.prototype._onSelectChange = function () {\n        var presetName = this._presetSelect.value;\n        if (presetName === \"custom\") {\n            this.setState({ presetName: presetName });\n            return;\n        }\n        var preset = presets[presetName];\n        this.setState({\n            height: preset.height,\n            mines: preset.mines,\n            presetName: presetName,\n            width: preset.width\n        });\n    };\n    Intro.prototype._onSettingInput = function () {\n        var width = this._widthInput.valueAsNumber;\n        var height = this._heightInput.valueAsNumber;\n        var mines = this._minesInput.valueAsNumber;\n        var maxMines = width * height - 9;\n        this.setState({\n            height: height,\n            mines: mines > maxMines ? maxMines : mines,\n            presetName: getPresetName(width, height, mines),\n            width: width\n        });\n    };\n    Intro.prototype._startGame = function (event) {\n        event.preventDefault();\n        this.props.onStartGame(this.state.width, this.state.height, this.state.mines);\n    };\n    tslib_1.__decorate([\n        bind\n    ], Intro.prototype, \"_onKeyUp\", null);\n    tslib_1.__decorate([\n        bind\n    ], Intro.prototype, \"_onSelectChange\", null);\n    tslib_1.__decorate([\n        bind\n    ], Intro.prototype, \"_onSettingInput\", null);\n    tslib_1.__decorate([\n        bind\n    ], Intro.prototype, \"_startGame\", null);\n    return Intro;\n}(Component));\nexport default Intro;\n//# sourceMappingURL=index.js.map","var _this = this;\nimport * as tslib_1 from \"tslib\";\n/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport workerURL from \"chunk-name:./../../../worker\";\nimport nebulaSafeDark from \"consts:nebulaSafeDark\";\nimport prerender from \"consts:prerender\";\nimport { Component, h } from \"preact\";\nimport toRGB from \"src/main/utils/to-rgb\";\nimport { bind } from \"src/utils/bind\";\nimport { isFeaturePhone } from \"../../utils/static-display\";\nimport { getGridDefault, setGridDefault } from \"../state/grid-default\";\nimport localStateSubscribe from \"../state/local-state-subscribe\";\nimport BottomBar from \"./components/bottom-bar\";\nimport deferred from \"./components/deferred\";\nimport GameLoading from \"./components/game-loading\";\nimport Intro from \"./components/intro\";\nimport { game as gameClassName, nebulaContainer } from \"./style.css\";\n// WARNING: This module is part of the main bundle. Avoid adding to it if possible.\nvar lazyImport;\nvar lazyImportReady = import(\"./lazy-load\").then(function (m) { return (lazyImport = m); });\nvar lazyComponents = new Promise(function (resolve) {\n    // Prevent component CSS loading in prerender mode\n    if (!prerender) {\n        var lazyComponentImport_1 = import(\"./lazy-components\");\n        resolve(lazyImportReady.then(function () { return lazyComponentImport_1; }));\n    }\n});\nvar stateServicePromise = (function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n    var worker, nextMessageEvent, remoteServices;\n    return tslib_1.__generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                // We don't need the worker if we're prerendering\n                if (prerender) {\n                    // tslint:disable-next-line: no-empty\n                    return [2 /*return*/, new Promise(function () { })];\n                }\n                worker = new Worker(\".\" + workerURL);\n                // @ts-ignore - iOS Safari seems to wrongly GC the worker. Throwing it to the global to prevent\n                // that happening.\n                self.w = worker;\n                return [4 /*yield*/, lazyImportReady];\n            case 1:\n                _a.sent();\n                nextMessageEvent = lazyImport.nextEvent(worker, \"message\");\n                worker.postMessage(\"ready?\");\n                return [4 /*yield*/, nextMessageEvent];\n            case 2:\n                _a.sent();\n                remoteServices = lazyImport.comlinkWrap(worker);\n                return [2 /*return*/, remoteServices.stateService];\n        }\n    });\n}); })();\nvar nebulaDangerDark = [40, 0, 0];\nvar nebulaDangerLight = [131, 23, 71];\n// Looking for nebulaSafeDark? It's defined in lib/nebula-safe-dark.js\nvar nebulaSafeLight = [54, 49, 176];\nvar nebulaSettingDark = [0, 0, 0];\nvar nebulaSettingLight = [41, 41, 41];\n// If the user tries to start a game when we aren't ready, how long do we wait before showing the\n// loading screen?\nvar loadingScreenTimeout = 1000;\n// tslint:disable-next-line:variable-name\nvar NebulaDeferred = deferred(lazyComponents.then(function (m) { return m.Nebula; }));\n// tslint:disable-next-line:variable-name\nvar GameDeferred = deferred(lazyComponents.then(function (m) { return m.Game; }));\n// tslint:disable-next-line:variable-name\nvar SettingsDeferred = deferred(lazyComponents.then(function (m) { return m.Settings; }));\nvar texturePromise = lazyImportReady.then(function () {\n    return lazyImport.lazyGenerateTextures();\n});\nvar gamePerquisites = texturePromise;\nvar immedateGameSessionKey = \"instantGame\";\nvar Root = /** @class */ (function (_super) {\n    tslib_1.__extends(Root, _super);\n    function Root() {\n        var _this = _super.call(this) || this;\n        _this.state = {\n            dangerMode: false,\n            awaitingGame: false,\n            settingsOpen: false,\n            motionPreference: true,\n            gameInPlay: false,\n            allowIntroAnim: true,\n            vibrationPreference: true\n        };\n        _this.previousFocus = null;\n        _this._gameChangeSubscribers = new Set();\n        _this._awaitingGameTimeout = -1;\n        getGridDefault().then(function (gridDefaults) {\n            _this.setState({ gridDefaults: gridDefaults });\n        });\n        lazyImportReady.then(function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            var _a, _b;\n            return tslib_1.__generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        lazyImport.initOffline();\n                        _a = this.setState;\n                        _b = {};\n                        return [4 /*yield*/, lazyImport.shouldUseMotion()];\n                    case 1:\n                        _b.motionPreference = _c.sent();\n                        return [4 /*yield*/, lazyImport.getVibrationPreference()];\n                    case 2:\n                        _a.apply(this, [(_b.vibrationPreference = _c.sent(),\n                                _b)]);\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n        // Is this the reload after an update?\n        // const instantGameDataStr = prerender\n        //   ? false\n        //   : sessionStorage.getItem(immedateGameSessionKey);\n        // start an instantGame\n        var instantGameDataStr = '{ \"width\": 8,\"height\": 8, \"mines\": 10, \"usedKeyboard\": false }';\n        if (instantGameDataStr) {\n            // sessionStorage.removeItem(immedateGameSessionKey);\n            _this.setState({ awaitingGame: true });\n        }\n        stateServicePromise.then(function (stateService) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            var _a, width, height, mines, usedKeyboard;\n            var _this = this;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this._stateService = stateService;\n                        return [4 /*yield*/, localStateSubscribe(this._stateService, function (stateChange) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                                var game, _a, _b, playMode, _c, _d, callback;\n                                var e_1, _e;\n                                return tslib_1.__generator(this, function (_f) {\n                                    switch (_f.label) {\n                                        case 0: return [4 /*yield*/, lazyImportReady];\n                                        case 1:\n                                            _f.sent();\n                                            if (!(\"game\" in stateChange)) return [3 /*break*/, 4];\n                                            game = stateChange.game;\n                                            if (!game) return [3 /*break*/, 3];\n                                            clearTimeout(this._awaitingGameTimeout);\n                                            setGridDefault(game.width, game.height, game.mines);\n                                            _a = this.setState;\n                                            _b = {\n                                                game: game,\n                                                awaitingGame: false,\n                                                gridDefaults: game,\n                                                gameInPlay: true\n                                            };\n                                            return [4 /*yield*/, lazyImport.getBestTime(game.width, game.height, game.mines)];\n                                        case 2:\n                                            _a.apply(this, [(_b.bestTime = _f.sent(),\n                                                    _b.allowIntroAnim = false,\n                                                    _b)]);\n                                            return [3 /*break*/, 4];\n                                        case 3:\n                                            this.setState({ game: game, gameInPlay: false });\n                                            _f.label = 4;\n                                        case 4:\n                                            if (\"gameStateChange\" in stateChange) {\n                                                playMode = stateChange.gameStateChange.playMode;\n                                                if (playMode === 2 /* Lost */ || playMode === 3 /* Won */) {\n                                                    this.setState({ gameInPlay: false });\n                                                }\n                                                try {\n                                                    for (_c = tslib_1.__values(this._gameChangeSubscribers), _d = _c.next(); !_d.done; _d = _c.next()) {\n                                                        callback = _d.value;\n                                                        callback(stateChange.gameStateChange);\n                                                    }\n                                                }\n                                                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                                                finally {\n                                                    try {\n                                                        if (_d && !_d.done && (_e = _c.return)) _e.call(_c);\n                                                    }\n                                                    finally { if (e_1) throw e_1.error; }\n                                                }\n                                            }\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            }); })];\n                    case 1:\n                        _b.sent();\n                        if (!instantGameDataStr) return [3 /*break*/, 3];\n                        return [4 /*yield*/, gamePerquisites];\n                    case 2:\n                        _b.sent();\n                        _a = JSON.parse(instantGameDataStr), width = _a.width, height = _a.height, mines = _a.mines, usedKeyboard = _a.usedKeyboard;\n                        if (!usedKeyboard) {\n                            // This is a horrible hack to tell focus-visible.js not to initially show focus styles.\n                            document.body.dispatchEvent(new MouseEvent(\"mousemove\", { bubbles: true }));\n                        }\n                        this._stateService.initGame(width, height, mines);\n                        _b.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        }); });\n        return _this;\n    }\n    Root.prototype.componentDidMount = function () {\n        if (prerender) {\n            prerenderDone();\n        }\n    };\n    Root.prototype.render = function (_, _a) {\n        var _this = this;\n        var game = _a.game, dangerMode = _a.dangerMode, awaitingGame = _a.awaitingGame, gridDefaults = _a.gridDefaults, settingsOpen = _a.settingsOpen, motionPreference = _a.motionPreference, gameInPlay = _a.gameInPlay, bestTime = _a.bestTime, allowIntroAnim = _a.allowIntroAnim, vibrationPreference = _a.vibrationPreference;\n        var mainComponent;\n        if (!game) {\n            if (awaitingGame) {\n                mainComponent = h(GameLoading, null);\n            }\n            else {\n                mainComponent = settingsOpen ? (h(SettingsDeferred, { loading: function () { return h(\"div\", null); }, \n                    // tslint:disable-next-line: variable-name\n                    loaded: function (Settings) { return (h(Settings, { onCloseClicked: _this._onSettingsCloseClick, motion: motionPreference, onMotionPrefChange: _this._onMotionPrefChange, disableAnimationBtn: !lazyImport.supportsSufficientWebGL || isFeaturePhone, supportsSufficientWebGL: lazyImport.supportsSufficientWebGL, texturePromise: texturePromise, useVibration: vibrationPreference, onVibrationPrefChange: _this._onVibrationPrefChange })); } })) : (h(Intro, { onStartGame: this._onStartGame, defaults: prerender ? undefined : gridDefaults, motion: motionPreference && allowIntroAnim }));\n            }\n        }\n        else {\n            mainComponent = (h(GameDeferred, { loading: function () { return h(\"div\", null); }, \n                // tslint:disable-next-line: variable-name\n                loaded: function (Game) { return (h(Game, { key: game.id, width: game.width, height: game.height, mines: game.mines, toRevealTotal: game.toRevealTotal, gameChangeSubscribe: _this._onGameChangeSubscribe, gameChangeUnsubscribe: _this._onGameChangeUnsubscribe, stateService: _this._stateService, dangerMode: dangerMode, onDangerModeChange: _this._onDangerModeChange, useMotion: motionPreference, bestTime: bestTime, useVibration: vibrationPreference })); } }));\n        }\n        return (h(\"div\", { class: gameClassName },\n            h(NebulaDeferred, { loading: function () { return (h(\"div\", { class: nebulaContainer, style: {\n                        background: \"linear-gradient(to bottom, \" + toRGB(nebulaSafeLight) + \", \" + toRGB(nebulaSafeDark) + \")\"\n                    } })); }, \n                // tslint:disable-next-line: variable-name\n                loaded: function (Nebula) { return (h(Nebula, { colorDark: _this._nebulaDarkColor(), colorLight: _this._nebulaLightColor(), useMotion: motionPreference })); } }),\n            mainComponent,\n            h(BottomBar, { onSettingsClick: this._onSettingsClick, onBackClick: this._onBackClick, onDangerModeChange: this._onDangerModeChange, buttonType: game ? \"back\" : \"info\", display: !settingsOpen, dangerMode: dangerMode, showDangerModeToggle: gameInPlay })));\n    };\n    Root.prototype._nebulaLightColor = function () {\n        if (this.state.settingsOpen) {\n            return nebulaSettingLight;\n        }\n        if (!this.state.game) {\n            return nebulaSafeLight;\n        }\n        if (this.state.dangerMode) {\n            return nebulaDangerLight;\n        }\n        return nebulaSafeLight;\n    };\n    Root.prototype._nebulaDarkColor = function () {\n        if (this.state.settingsOpen) {\n            return nebulaSettingDark;\n        }\n        if (!this.state.game) {\n            return nebulaSafeDark;\n        }\n        if (this.state.dangerMode) {\n            return nebulaDangerDark;\n        }\n        return nebulaSafeDark;\n    };\n    Root.prototype._onMotionPrefChange = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var motionPreference, setMotionPreference;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        motionPreference = !this.state.motionPreference;\n                        this.setState({ motionPreference: motionPreference });\n                        return [4 /*yield*/, lazyImportReady];\n                    case 1:\n                        setMotionPreference = (_a.sent()).setMotionPreference;\n                        setMotionPreference(motionPreference);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Root.prototype._onVibrationPrefChange = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var vibrationPreference, setVibrationPreference;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        vibrationPreference = !this.state.vibrationPreference;\n                        this.setState({ vibrationPreference: vibrationPreference });\n                        return [4 /*yield*/, lazyImportReady];\n                    case 1:\n                        setVibrationPreference = (_a.sent()).setVibrationPreference;\n                        setVibrationPreference(vibrationPreference);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Root.prototype._onDangerModeChange = function (dangerMode) {\n        this.setState({ dangerMode: dangerMode });\n    };\n    Root.prototype._onGameChangeSubscribe = function (func) {\n        this._gameChangeSubscribers.add(func);\n    };\n    Root.prototype._onGameChangeUnsubscribe = function (func) {\n        this._gameChangeSubscribers.delete(func);\n    };\n    Root.prototype._onSettingsCloseClick = function () {\n        var _this = this;\n        this.setState({ settingsOpen: false }, function () {\n            _this.previousFocus.focus();\n        });\n    };\n    Root.prototype._onSettingsClick = function () {\n        this.previousFocus = document.activeElement;\n        this.setState({ settingsOpen: true, allowIntroAnim: false });\n    };\n    Root.prototype._onStartGame = function (width, height, mines) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, updateReady, skipWaiting, usedKeyboard, stateService;\n            var _this = this;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this._awaitingGameTimeout = setTimeout(function () {\n                            _this.setState({ awaitingGame: true });\n                        }, loadingScreenTimeout);\n                        return [4 /*yield*/, lazyImportReady];\n                    case 1:\n                        _a = _b.sent(), updateReady = _a.updateReady, skipWaiting = _a.skipWaiting;\n                        if (!updateReady) return [3 /*break*/, 3];\n                        // There's an update available. Let's load it as part of starting the game…\n                        return [4 /*yield*/, skipWaiting()];\n                    case 2:\n                        // There's an update available. Let's load it as part of starting the game…\n                        _b.sent();\n                        usedKeyboard = !!document.querySelector(\".focus-visible\");\n                        sessionStorage.setItem(immedateGameSessionKey, JSON.stringify({ width: width, height: height, mines: mines, usedKeyboard: usedKeyboard }));\n                        location.reload();\n                        return [2 /*return*/];\n                    case 3: \n                    // Wait for everything to be ready:\n                    return [4 /*yield*/, gamePerquisites];\n                    case 4:\n                        // Wait for everything to be ready:\n                        _b.sent();\n                        return [4 /*yield*/, stateServicePromise];\n                    case 5:\n                        stateService = _b.sent();\n                        stateService.initGame(width, height, mines);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Root.prototype._onBackClick = function () {\n        this.setState({ dangerMode: false });\n        this._stateService.reset();\n    };\n    tslib_1.__decorate([\n        bind\n    ], Root.prototype, \"_onMotionPrefChange\", null);\n    tslib_1.__decorate([\n        bind\n    ], Root.prototype, \"_onVibrationPrefChange\", null);\n    tslib_1.__decorate([\n        bind\n    ], Root.prototype, \"_onDangerModeChange\", null);\n    tslib_1.__decorate([\n        bind\n    ], Root.prototype, \"_onGameChangeSubscribe\", null);\n    tslib_1.__decorate([\n        bind\n    ], Root.prototype, \"_onGameChangeUnsubscribe\", null);\n    tslib_1.__decorate([\n        bind\n    ], Root.prototype, \"_onSettingsCloseClick\", null);\n    tslib_1.__decorate([\n        bind\n    ], Root.prototype, \"_onSettingsClick\", null);\n    tslib_1.__decorate([\n        bind\n    ], Root.prototype, \"_onStartGame\", null);\n    tslib_1.__decorate([\n        bind\n    ], Root.prototype, \"_onBackClick\", null);\n    return Root;\n}(Component));\nexport default Root;\n//# sourceMappingURL=index.js.map","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport prerender from \"consts:prerender\";\nimport { h, render } from \"preact\";\nimport Root from \"src/main/services/preact-canvas\";\nimport { main } from \"./style.css\";\nvar container = document.body.querySelector(\".app\");\ncontainer.classList.add(main);\nrender(h(Root, null), container, container.firstChild);\nperformance.mark(\"UI ready\");\nif (!prerender) {\n    window.ga = window.ga || (function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (ga.q = ga.q || []).push(args);\n    });\n    ga(\"create\", \"UA-139146337-1\", \"auto\");\n    ga(\"set\", \"transport\", \"beacon\");\n    ga(\"send\", \"pageview\");\n    // Load the GA script\n    var s = document.createElement(\"script\");\n    s.src = \"https://www.google-analytics.com/analytics.js\";\n    document.head.appendChild(s);\n}\n//# sourceMappingURL=bootstrap.js.map"],"names":["key","localStateSubscribe","stateService","callback","tslib_1.__awaiter","this","comlinkProxy","tslib_1.__generator","_a","label","sent","subscribe","Fullscreen","props","h","tslib_1.__assign","viewBox","d","Information","Arrow","preserveAspectRatio","Back","goFullscreen","document","documentElement","requestFullscreen","webkitRequestFullscreen","fullscreenSupported","BottomBar","_super","_this","apply","arguments","state","flagModeAnnouncement","tslib_1.__extends","prototype","render","_b","onSettingsClick","onBackClick","display","buttonType","dangerMode","showDangerModeToggle","isFeaturePhone","class","leftKeyIcon","onClick","aria-label","shortcutKey","leftIcon","fpToggle","checkbox","type","role","onChange","_onDangerModeSwitchToggle","checked","ref","el","_flagCheckbox","aria-hidden","aria-live","toggleContainer","onTouchStart","_onDangerModeTouchStart","toggleLabel","leftToggleLabel","toggle","id","fill","x","y","width","height","cx","cy","r","rx","ry","mask","rightToggleLabel","fullscreen","noFullscreen","bottomBar","hidden","join","componentDidMount","window","addEventListener","_onKeyUp","componentWillUnmount","removeEventListener","event","_dangerModeChange","newVal","announce","onDangerModeChange","setState","preventDefault","tslib_1.__decorate","bind","Component","deferred","componentPromise","Deferred","call","LoadedComponent","undefined","then","component","loaded","loading","GameLoading","ShowbizTitleDeferred","Promise","resolve","m","ShowbizTitle","NumberField","inputRef","children","inputProps","tslib_1.__rest","_onUpClick","_onDownClick","_input","inputmode","pattern","valueAsNumber","Math","min","Number","max","_dispatch","dispatchEvent","Event","getStateUpdateFromDefaults","defaults","mines","presetName","getPresetName","Intro","scrollTo","componentWillReceiveProps","motion","onSubmit","_startGame","required","_presetSelect","_onSelectChange","value","step","_widthInput","_onSettingInput","_heightInput","_minesInput","preset","presets","maxMines","onStartGame","lazyImport","lazyImportReady","lazyComponents","lazyComponentImport_1","stateServicePromise","worker","nextMessageEvent","Worker","self","w","nextEvent","postMessage","comlinkWrap","nebulaDangerDark","nebulaDangerLight","nebulaSafeLight","nebulaSettingDark","nebulaSettingLight","NebulaDeferred","Nebula","GameDeferred","Game","SettingsDeferred","Settings","texturePromise","lazyGenerateTextures","gamePerquisites","Root","awaitingGame","settingsOpen","motionPreference","gameInPlay","allowIntroAnim","vibrationPreference","previousFocus","_gameChangeSubscribers","Set","_awaitingGameTimeout","gridDefault","get","easy","getGridDefault","gridDefaults","_c","initOffline","shouldUseMotion","getVibrationPreference","_stateService","stateChange","game","playMode","_d","e_1","_e","_f","clearTimeout","set","setGridDefault","getBestTime","bestTime","gameStateChange","tslib_1.__values","next","done","e_1_1","error","return","JSON","parse","usedKeyboard","body","MouseEvent","bubbles","initGame","_","mainComponent","toRevealTotal","gameChangeSubscribe","_onGameChangeSubscribe","gameChangeUnsubscribe","_onGameChangeUnsubscribe","_onDangerModeChange","useMotion","useVibration","onCloseClicked","_onSettingsCloseClick","onMotionPrefChange","_onMotionPrefChange","disableAnimationBtn","supportsSufficientWebGL","onVibrationPrefChange","_onVibrationPrefChange","_onStartGame","style","background","toRGB","nebulaSafeDark","colorDark","_nebulaDarkColor","colorLight","_nebulaLightColor","_onSettingsClick","_onBackClick","setMotionPreference","setVibrationPreference","func","add","delete","focus","activeElement","updateReady","skipWaiting","setTimeout","querySelector","sessionStorage","setItem","stringify","location","reload","reset","container","classList","firstChild","performance","mark","ga","args","_i","length","q","push","s","createElement","src","head","appendChild"],"mappings":"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"}